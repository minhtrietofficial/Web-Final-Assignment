!function(t){"use strict";var n={},o=[],r=t=>t,l=o.map,y=Array.isArray,g="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout,i=t=>{var n="";if("string"==typeof t)return t;if(y(t))for(var o,l=0;l<t.length;l++)(o=i(t[l]))&&(n+=(n&&" ")+o);else for(var l in t)t[l]&&(n+=(n&&" ")+l);return n},a=(t,n)=>{for(var o in{...t,...n})if("function"==typeof(y(n[o]=t[o])?n[o][0]:n[o]));else if(t[o]!==n[o])return!0},u=t=>null==t?t:t.key,d=(t,n,o,l,y,g)=>{if("key"===n);else if("style"===n)for(var b in{...o,...l})o=null==l||null==l[b]?"":l[b],"-"===b[0]?t[n].setProperty(b,o):t[n][b]=o;else"o"===n[0]&&"n"===n[1]?((t.tag||(t.tag={}))[n=n.slice(2)]=l)?o||t.addEventListener(n,y):t.removeEventListener(n,y):!g&&"list"!==n&&"form"!==n&&n in t?t[n]=null==l?"":l:null==l||!1===l||"class"===n&&!(l=i(l))?t.removeAttribute(n):t.setAttribute(n,l)},f=(t,n,o)=>{var l=t.props,y=3===t.tag?document.createTextNode(t.type):(o=o||"svg"===t.type)?document.createElementNS("http://www.w3.org/2000/svg",t.type,{is:l.is}):document.createElement(t.type,{is:l.is});for(var g in l)d(y,g,null,l[g],n,o);for(var b=0;b<t.children.length;b++)y.appendChild(f(t.children[b]=p(t.children[b]),n,o));return t.node=y},s=(t,n,o,l,y,g)=>{if(o===l);else if(null!=o&&3===o.tag&&3===l.tag)o.type!==l.type&&(n.nodeValue=l.type);else if(null==o||o.type!==l.type)n=t.insertBefore(f(l=p(l),y,g),n),null!=o&&t.removeChild(o.node);else{var b,E,N,C,w=o.props,P=l.props,T=o.children,A=l.children,S=0,V=0,M=T.length-1,L=A.length-1;for(var k in g=g||"svg"===l.type,{...w,...P})("value"===k||"selected"===k||"checked"===k?n[k]:w[k])!==P[k]&&d(n,k,w[k],P[k],y,g);for(;V<=L&&S<=M&&null!=(N=u(T[S]))&&N===u(A[V]);)s(n,T[S].node,T[S],A[V]=p(A[V++],T[S++]),y,g);for(;V<=L&&S<=M&&null!=(N=u(T[M]))&&N===u(A[L]);)s(n,T[M].node,T[M],A[L]=p(A[L--],T[M--]),y,g);if(S>M)for(;V<=L;)n.insertBefore(f(A[V]=p(A[V++]),y,g),(E=T[S])&&E.node);else if(V>L)for(;S<=M;)n.removeChild(T[S++].node);else{var I={},_={};for(k=S;k<=M;k++)null!=(N=T[k].key)&&(I[N]=T[k]);for(;V<=L;)N=u(E=T[S]),C=u(A[V]=p(A[V],E)),_[N]||null!=C&&C===u(T[S+1])?(null==N&&n.removeChild(E.node),S++):null==C||1===o.tag?(null==N&&(s(n,E&&E.node,E,A[V],y,g),V++),S++):(N===C?(s(n,E.node,E,A[V],y,g),_[C]=!0,S++):null!=(b=I[C])?(s(n,n.insertBefore(b.node,E&&E.node),b,A[V],y,g),_[C]=!0):s(n,E&&E.node,null,A[V],y,g),V++);for(;S<=M;)null==u(E=T[S++])&&n.removeChild(E.node);for(var k in I)null==_[k]&&n.removeChild(I[k].node)}}return l.node=n},p=(t,n)=>!0!==t&&!1!==t&&t?"function"==typeof t.tag?((!n||null==n.memo||((t,n)=>{for(var o in t)if(t[o]!==n[o])return!0;for(var o in n)if(t[o]!==n[o])return!0})(n.memo,t.memo))&&((n=t.tag(t.memo)).memo=t.memo),n):t:text(""),m=t=>3===t.nodeType?text(t.nodeValue,t):v(t.nodeName.toLowerCase(),n,l.call(t.childNodes,m),t,null,1),v=(t,n,o,l,y,g)=>({type:t,props:n,children:o,node:l,key:y,tag:g}),text=(t,l)=>v(t,n,o,l,null,3);function dispatchEventEffect(t,{eventType:n,eventInit:o}){const l=new CustomEvent(n,o);this.dispatchEvent(l)}function setOnEventListenerEffect(t,{eventType:n,oldVal:o,newVal:l}){null!==o&&this.removeEventListener(n,o),null!==l&&this.addEventListener(n,l)}function eventSubscriber(t,{target:n,eventType:o,action:l}){return(n=n||window).addEventListener(o,handleEvent),()=>{n.removeEventListener(o,handleEvent)};function handleEvent(n){t([l,n])}}function initNativeProperties(t,n){for(const t in n)this[t]=n[t]}function setValidity(t,{input:n,isValid:o,errorMsg:l}){n.setCustomValidity(o?"":l)}const b=new WeakMap;function debounceEffect(t,{action:n,props:o,interval:l}){!function cancelAction(t){const n=b.get(t);n&&(clearTimeout(n),b.delete(t))}(n);const y=setTimeout(()=>{b.delete(n),t(n,o)},l);b.set(n,y)}const E="phone-parse",N="E.164";function parsePhoneNumber(n,{defaultCountry:o,value:l,action:y}){const g=t.parsePhoneNumberFromString(l,o);n(y,{country:g?.country,phoneIsPossible:g?.isPossible()||!1,phoneIsValid:g?.isValid()||!1,phoneType:g?.getType(),phoneE164:g?.format(N)})}function formatPhoneNumber(n,{defaultCountry:o,input:l}){const y=new t.AsYouType(o).input(l.value);if(l.value!==y){const t=l.selectionStart,n=l.selectionEnd,o=t!==l.value.length;l.value=y,o&&l.setSelectionRange(t,n)}}function createSetValidityEffect({self:t,phoneIsValid:n,errorMsg:o}){return[setValidity,{input:t,isValid:n,errorMsg:o||"Invalid phone number!"}]}const C=function debounce(t,n=250){return function(o,l){return[o,[debounceEffect,{action:t,props:l,interval:n}]]}}((function HandleInput(t,n){return[t,[parsePhoneNumber,{defaultCountry:t.defaultCountry,value:n.target.value,action:UpdatePhoneNumber}]]}),250);function UpdatePhoneNumber(t,n){const o={...t,...n},l=[createSetValidityEffect(o),[formatPhoneNumber,{defaultCountry:o.defaultCountry,input:o.self}],[dispatchEventEffect,{eventType:E}]];return t.country!==o.country&&l.push([dispatchEventEffect,{eventType:"phone-country-change",eventInit:{detail:o.country}}]),[o,...l]}const w=function t$1({app:t,state:n,init:o,view:l,subscriptions:y,middleware:g,exposedConfig:b=[],exposedMethods:E={},useShadowDOM:N=!0,parent:C=HTMLElement}){const[w,P]=function(){const t=new Map,n=new Map;for(const o of b)o.propName&&t.set(o.propName,o),o.attrName&&n.set(o.attrName.toLowerCase(),o),"function"!=typeof o.setter&&(o.setter=o.eventType?d(o):PatchState);return[t,n]}();class CustomElement extends C{constructor(){super();const b=(N?this.attachShadow({mode:"open"}):this._fragment=document.createDocumentFragment()).appendChild(document.createElement("span"));n&&(o=n,console.warn('Passing "state" is deprecated. Pass "init" instead'));const E=this.wrapDispatch.bind(this);var C,w;"function"==typeof g?(C=E,w=g,g=function(t){return C(w(t))}):g=E,t({init:o,view:l,subscriptions:y,middleware:g,node:b})}connectedCallback(){N||C!==HTMLElement||this.appendChild(this._fragment)}disconnectedCallback(){this._dispatch=void 0}wrapDispatch(t){const e=t=>{const n=t.bind(this);return t.$isWrapped&&(n.$isWrapped=!0),n};return this._dispatch=t,(n,o)=>{let l;if("function"==typeof n)n=e(n);else if(Array.isArray(n))if("function"==typeof n[0])n[0]=e(n[0]);else{l=n[0];for(let t=1;t<n.length;t++){const o=n[t];o[0]=e(o[0])}}else l=n;void 0!==l&&(this._state=l),t(n,o),void 0!==l&&this.syncAttributes()}}dispatchAction(t,n){this._dispatch(t,n)}syncAttributes(){for(const t in this._state)if(w.has(t)){const n=w.get(t);n.attrName&&this.syncAttribute(n,this._state[t])}}syncAttribute(t,n){if(t.eventType)return;const o=t.attrName;"boolean"==typeof n?n?this.setAttribute(o,""):this.removeAttribute(o):null==n||""===n?this.removeAttribute(o):this.setAttribute(o,n)}getProperty(t){return(w.get(t).getter||(n=>n?.[t]))(this._state)}setProperty(t,n){const o=w.get(t).setter;this.dispatchAction(o,{[t]:n})}attributeChangedCallback(t,n,o){if(n===o)return;const l=P.get(t.toLowerCase()),y=l.setter,g=l.propName||l.attrName;(""===o&&null===n||null===o&&""===n||null===o&&n===t||o===t&&null===n)&&(o=!(null===o)),this.dispatchAction(y,{[g]:o})}static get observedAttributes(){return P.keys()}}function PatchState(t,n){return{...t,...n}}function d({propName:t,attrName:n,eventType:o}){return function SetOnEventHandler(l,y){const g=t||n;let b=y[g];b&&"function"!=typeof b&&(b=new Function("event",b),Object.defineProperty(b,"name",{value:g}));const E=l[g];return[{...l,[g]:b},[setOnEventListenerEffect,{eventType:o,oldVal:E,newVal:b}]]}}return w.forEach((t,n)=>{const o={configurable:!1,enumerable:!0,get(){return this.getProperty(n)},set(t){this.setProperty(n,t)}};Object.defineProperty(CustomElement.prototype,n,o)}),function(){for(const t in E)CustomElement.prototype[t]=function(){this.dispatchAction(E[t])}}(),CustomElement}({app:t=>{var n,o,l=t.view,b=t.node,E=t.subscriptions,N=b&&m(b),C=[],v=t=>{o!==t&&(o=t,E&&(C=((t,n,o)=>{for(var l,y,g=[],b=0;b<t.length||b<n.length;b++)l=t[b],y=n[b],g.push(y&&!0!==y?!l||y[0]!==l[0]||a(y[1],l[1])?[y[0],y[1],y[0](o,y[1]),l&&l[2]()]:l:l&&l[2]());return g})(C,E(o),w)),l&&!n&&g(h,n=!0))},w=(t.middleware||r)((t,n)=>"function"==typeof t?w(t(o,n)):y(t)?"function"==typeof t[0]?w(t[0],t[1]):t.slice(1).map(t=>t&&!0!==t&&t[0](w,t[1]),v(t[0])):v(t)),c=function(t){w(this.tag[t.type],t)},h=()=>b=s(b.parentNode,b,N,N=l(o),c,n=!1);w(t.init)},init:[function InitialiseState(t={}){return[{...t,self:this},[initNativeProperties,{type:"tel"}]]},{}],view:()=>((t,n,l)=>v(t,n,y(l)?l:null==l?o:[l],null,n.key))("span",{}),subscriptions:function subscriptions(t){return[[eventSubscriber,{target:t.self,eventType:"input",action:C}]]},exposedConfig:[{propName:"defaultCountry",attrName:"default-country",setter:function SetDefaultCountry(t,{defaultCountry:n}){const o={...t,defaultCountry:n};return[o,[parsePhoneNumber,{defaultCountry:n,value:o.self.value,action:UpdatePhoneNumber}]]}},{propName:"errorMsg",attrName:"error-msg",setter:function SetErrorMessage(t,{errorMsg:n}){return[{...t,errorMsg:n},createSetValidityEffect(t)]}},{propName:"phoneIsValid",attrName:"phone-is-valid"},{propName:"phoneIsPossible",attrName:"phone-is-possible"},{propName:"country",attrName:"country"},{propName:"phoneType",attrName:"phone-type"},{propName:"phoneE164",attrName:"phone-e164"},{propName:"onparse",attrName:"onparse",eventType:E},{propName:"oncountrychange",attrName:"oncountrychange",eventType:"phone-country-change"}],useShadowDOM:!1,parent:HTMLInputElement});customElements.define("phone-number-input",w,{extends:"input"})}(libphonenumber);
//# sourceMappingURL=phone-number-input.min.js.map
